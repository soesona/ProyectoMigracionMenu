<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="DSReporteEntradas" targetNamespace="http://tempuri.org/DSReporteEntradas.xsd" xmlns:mstns="http://tempuri.org/DSReporteEntradas.xsd" xmlns="http://tempuri.org/DSReporteEntradas.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:msprop="urn:schemas-microsoft-com:xml-msprop" attributeFormDefault="qualified" elementFormDefault="qualified">
  <xs:annotation>
    <xs:appinfo source="urn:schemas-microsoft-com:xml-msdatasource">
      <DataSource DefaultConnectionIndex="0" FunctionsComponentName="QuerieMigrantes" GeneratorFunctionsComponentClassName="QuerieMigrantes" Modifier="AutoLayout, AnsiClass, Class, Public" SchemaSerializationMode="IncludeSchema" UserFunctionsComponentName="QuerieMigrantes" xmlns="urn:schemas-microsoft-com:xml-msdatasource">
        <Connections>
          <Connection ConnectionStringObject="Data Source=ENAMORADO\SQLEXPRESS;Initial Catalog=MigracionQA;Integrated Security=True;TrustServerCertificate=True" IsAppSettingsProperty="false" Modifier="Assembly" Name="enamorado\sqlexpress.MigracionQA .dbo" ParameterPrefix="@" Provider="System.Data.SqlClient" />
        </Connections>
        <Tables>
          <TableAdapter BaseClass="System.ComponentModel.Component" DataAccessorModifier="AutoLayout, AnsiClass, Class, Public" DataAccessorName="DSReporteEntradasDelegacionesTableAdapter" GeneratorDataComponentClassName="DSReporteEntradasDelegacionesTableAdapter" Name="DSReporteEntradasDelegaciones" UserDataComponentName="DSReporteEntradasDelegacionesTableAdapter">
            <MainSource>
              <DbSource ConnectionRef="enamorado\sqlexpress.MigracionQA .dbo" DbObjectName="[MigracionQA ].dbo.Delegaciones" DbObjectType="Table" FillMethodModifier="Public" FillMethodName="FillEntrada" GenerateMethods="Both" GenerateShortCommands="false" GeneratorGetMethodName="GetDataEntrada" GeneratorSourceName="FillEntrada" GetMethodModifier="Public" GetMethodName="GetDataEntrada" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="false" UserGetMethodName="GetDataEntrada" UserSourceName="FillEntrada">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>SELECT 
    d.NombreDelegacion,  
    SUM(CASE WHEN m.IdSexo = 2 THEN 1 ELSE 0 END) AS TotalFemeninos,  
    SUM(CASE WHEN m.IdSexo = 1 THEN 1 ELSE 0 END) AS TotalMasculinos,  
    SUM(CASE WHEN DATEDIFF(YEAR, m.f_Nacimiento, GETDATE()) &lt; 18 THEN 1 ELSE 0 END) AS TotalMenores
FROM 
    Personas m
JOIN 
    Usuarios u ON m.UsuarioCreado = u.Nombre
JOIN 
    Delegaciones d ON u.IdDelegacion = d.IdDelegacion
WHERE 
    d.NombreDelegacion = @NombreDelegacion AND  
    m.f_regCreado BETWEEN @FechaInicio AND @FechaFin
GROUP BY 
    d.NombreDelegacion;</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="false" AutogeneratedName="NombreDelegacion" ColumnName="NombreDelegacion" DataSourceName="[MigracionQA ].dbo.Delegaciones" DataTypeServer="nvarchar(100)" DbType="String" Direction="Input" ParameterName="@NombreDelegacion" Precision="0" ProviderType="NVarChar" Scale="0" Size="100" SourceColumn="NombreDelegacion" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="FechaInicio" ColumnName="f_regCreado" DataSourceName="[MigracionQA ].dbo.Personas" DataTypeServer="datetime" DbType="DateTime" Direction="Input" ParameterName="@FechaInicio" Precision="0" ProviderType="DateTime" Scale="0" Size="8" SourceColumn="f_regCreado" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="FechaFin" ColumnName="f_regCreado" DataSourceName="[MigracionQA ].dbo.Personas" DataTypeServer="datetime" DbType="DateTime" Direction="Input" ParameterName="@FechaFin" Precision="0" ProviderType="DateTime" Scale="0" Size="8" SourceColumn="f_regCreado" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </SelectCommand>
              </DbSource>
            </MainSource>
            <Mappings>
              <Mapping SourceColumn="NombreDelegacion" DataSetColumn="NombreDelegacion" />
              <Mapping SourceColumn="TotalFemeninos" DataSetColumn="TotalFemeninos" />
              <Mapping SourceColumn="TotalMasculinos" DataSetColumn="TotalMasculinos" />
              <Mapping SourceColumn="TotalMenores" DataSetColumn="TotalMenores" />
            </Mappings>
            <Sources>
              <DbSource ConnectionRef="enamorado\sqlexpress.MigracionQA .dbo" DbObjectName="[MigracionQA ].dbo.Delegaciones" DbObjectType="Table" FillMethodModifier="Public" FillMethodName="FillBy" GenerateMethods="Both" GenerateShortCommands="true" GeneratorGetMethodName="GetDataBy" GeneratorSourceName="FillBy" GetMethodModifier="Public" GetMethodName="GetDataBy" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="true" UserGetMethodName="GetDataBy" UserSourceName="FillBy">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>SELECT 
    d.NombreDelegacion,
    SUM(CASE WHEN m.IdSexo = 2 THEN 1 ELSE 0 END) AS TotalFemeninos,  
    SUM(CASE WHEN m.IdSexo = 1 THEN 1 ELSE 0 END) AS TotalMasculinos,  
    SUM(CASE WHEN DATEDIFF(YEAR, m.f_Nacimiento, GETDATE()) &lt; 18 THEN 1 ELSE 0 END) AS TotalMenores,
    @FechaInicio AS FechaInicio,
    @FechaFin AS FechaFin
FROM 
    Personas m
JOIN 
    Usuarios u ON m.UsuarioCreado = u.Nombre
JOIN 
    Delegaciones d ON u.IdDelegacion = d.IdDelegacion
WHERE 
    u.IdDelegacion = @IdDelegacion AND  
    m.f_regCreado BETWEEN @FechaInicio AND @FechaFin
GROUP BY 
    d.NombreDelegacion;
</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="true" AutogeneratedName="FechaInicio" ColumnName="f_regCreado" DataSourceName="[MigracionQA ].dbo.Personas" DataTypeServer="datetime" DbType="DateTime" Direction="Input" ParameterName="@FechaInicio" Precision="0" ProviderType="DateTime" Scale="0" Size="8" SourceColumn="f_regCreado" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="FechaFin" ColumnName="f_regCreado" DataSourceName="[MigracionQA ].dbo.Personas" DataTypeServer="datetime" DbType="DateTime" Direction="Input" ParameterName="@FechaFin" Precision="0" ProviderType="DateTime" Scale="0" Size="8" SourceColumn="f_regCreado" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="false" AutogeneratedName="IdDelegacion" ColumnName="IdDelegacion" DataSourceName="[MigracionQA ].dbo.Usuarios" DataTypeServer="int" DbType="Int32" Direction="Input" ParameterName="@IdDelegacion" Precision="0" ProviderType="Int" Scale="0" Size="4" SourceColumn="IdDelegacion" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </SelectCommand>
              </DbSource>
            </Sources>
          </TableAdapter>
        </Tables>
        <Sources />
      </DataSource>
    </xs:appinfo>
  </xs:annotation>
  <xs:element name="DSReporteEntradas" msdata:IsDataSet="true" msdata:UseCurrentLocale="true" msprop:Generator_UserDSName="DSReporteEntradas" msprop:EnableTableAdapterManager="true" msprop:Generator_DataSetName="DSReporteEntradas">
    <xs:complexType>
      <xs:choice minOccurs="0" maxOccurs="unbounded">
        <xs:element name="DSReporteEntradasDelegaciones" msprop:Generator_RowEvHandlerName="DSReporteEntradasDelegacionesRowChangeEventHandler" msprop:Generator_RowDeletedName="DSReporteEntradasDelegacionesRowDeleted" msprop:Generator_RowDeletingName="DSReporteEntradasDelegacionesRowDeleting" msprop:Generator_RowEvArgName="DSReporteEntradasDelegacionesRowChangeEvent" msprop:Generator_TablePropName="DSReporteEntradasDelegaciones" msprop:Generator_RowChangedName="DSReporteEntradasDelegacionesRowChanged" msprop:Generator_UserTableName="DSReporteEntradasDelegaciones" msprop:Generator_RowChangingName="DSReporteEntradasDelegacionesRowChanging" msprop:Generator_RowClassName="DSReporteEntradasDelegacionesRow" msprop:Generator_TableClassName="DSReporteEntradasDelegacionesDataTable" msprop:Generator_TableVarName="tableDSReporteEntradasDelegaciones">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="NombreDelegacion" msprop:Generator_ColumnPropNameInTable="NombreDelegacionColumn" msprop:Generator_ColumnPropNameInRow="NombreDelegacion" msprop:Generator_UserColumnName="NombreDelegacion" msprop:Generator_ColumnVarNameInTable="columnNombreDelegacion">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="100" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="TotalFemeninos" msdata:ReadOnly="true" msprop:Generator_ColumnPropNameInTable="TotalFemeninosColumn" msprop:Generator_ColumnPropNameInRow="TotalFemeninos" msprop:Generator_UserColumnName="TotalFemeninos" msprop:Generator_ColumnVarNameInTable="columnTotalFemeninos" type="xs:int" minOccurs="0" />
              <xs:element name="TotalMasculinos" msdata:ReadOnly="true" msprop:Generator_ColumnPropNameInTable="TotalMasculinosColumn" msprop:Generator_ColumnPropNameInRow="TotalMasculinos" msprop:Generator_UserColumnName="TotalMasculinos" msprop:Generator_ColumnVarNameInTable="columnTotalMasculinos" type="xs:int" minOccurs="0" />
              <xs:element name="TotalMenores" msdata:ReadOnly="true" msprop:Generator_ColumnPropNameInTable="TotalMenoresColumn" msprop:Generator_ColumnPropNameInRow="TotalMenores" msprop:Generator_UserColumnName="TotalMenores" msprop:Generator_ColumnVarNameInTable="columnTotalMenores" type="xs:int" minOccurs="0" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:choice>
    </xs:complexType>
  </xs:element>
</xs:schema>